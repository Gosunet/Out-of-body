var modules=["ui.router","ngStorage"],menu=angular.module("menu",modules);menu.controller("menuWebCtrl",function($scope,$state,$rootScope,$http){$state.go("mainMenu")}),menu.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("mainMenu",{url:"",templateUrl:"client/templates/mainMenu.html"}).state("oob",{url:"/sortie_de_corps",templateUrl:"client/templates/oob.html"}).state("runOob",{url:"/sortie_de_corps/application_en_cours",templateUrl:"client/templates/runOob.html"}).state("avatar",{url:"/avatar",templateUrl:"client/templates/avatar.html"}).state("avatar_choix",{url:"/avatar/choix",templateUrl:"client/templates/avatarMedecin.html"}).state("portes",{url:"/portes",templateUrl:"client/templates/portes.html"}).state("entiere",{url:"/portes/entiere",templateUrl:"client/templates/portesConfig.html"}).state("demi_haut",{url:"/portes/demi_haut",templateUrl:"client/templates/portesConfig.html"}).state("demi_bas",{url:"/portes/demi_bas",templateUrl:"client/templates/portesConfig.html"}).state("runPortes",{url:"/portes/en_cours",templateUrl:"client/templates/runPortes.html"})}),menu.controller("mainMenuCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin1="",$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.exit=function(){$http.get("/exit")},$rootScope.exit=function(state){$http.get("stop"),state?$state.go(state):$state.go("mainMenu")}}),menu.controller("AvatarCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin1="Avatar",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin3="",$rootScope.suivant=!0;var sexe="F";$scope.previous=function(){$state.go("mainMenu")},$scope.next=function(){$http.get("/"+sexe+"_avatar"),$state.go("avatar_choix")},$scope.sexe_selected=function(type){sexe=type}}),menu.controller("AvatarMedecinCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin3="Choix Médecin",$rootScope.suivant=!1,$scope.previous=function(){$state.go("avatar"),$http.get("stop")},$scope.next=function(){$http.get("validerAvatar/"+$scope.facteurAvatar),$state.go("mainMenu")}}),menu.controller("OobCtrl",function($scope,$state,$http,$rootScope){$rootScope.chemin="Accueil",$rootScope.chemin1="Sortie de corps",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.morphing=!1,$scope.baton=!1,$scope.message="",$scope.previous=function(){$state.go("mainMenu")},$scope.next=function(){$scope.baton&&$scope.morphing&&$scope.ghost?$http.get("oob/1_1_1"):$scope.baton&&$scope.morphing?$http.get("oob/1_1_0"):$scope.morphing&&$scope.ghost?$http.get("oob/0_1_1"):$scope.morphing?$http.get("oob/0_1_0"):$scope.baton?$http.get("oob/1_0_0"):$http.get("oob/0_0_0"),$state.go("runOob")}}),menu.controller("OobRunCtrl",function($scope,$state,$http,$rootScope,$document){$rootScope.chemin="Accueil",$rootScope.chemin1="Sortie de corps",$rootScope.stateChemin1="oob",$rootScope.chemin2="",$rootScope.chemin3="Application en cours",$rootScope.stateChemin3=$state.current.name,$rootScope.suivant=!1,$document.on("keydown",function(e){8===e.which&&e.preventDefault()}),$scope.exit=function(){$http.get("stop"),$state.go("mainMenu")}}),menu.controller("PortesCtrl",function($scope,$state,$rootScope){$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des portes",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.suivant_click=function(type){$state.go(type)},$scope.previous=function(){$state.go("mainMenu")}}),menu.controller("PortesConfigCtrl",function($scope,$state,$http,$rootScope,$localStorage){$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des portes",$rootScope.stateChemin1="portes","entiere"==$state.current.name?$rootScope.chemin2="Portes entières":"demi_haut"==$state.current.name?$rootScope.chemin2="Étagères":$rootScope.chemin2="Portiques",$rootScope.stateChemin2=$state.current.name,$rootScope.chemin3="",$rootScope.suivant=!0,initDemiePorte=function(){$scope.nbTailleLargeur=1|Number(window.localStorage.local_nbTailleLargeur),$scope.diffTailleLargeur=0|Number(window.localStorage.local_diffTailleLargeur),$scope.nbTailleHauteur=Number(1),$scope.diffTailleHauteur=Number(0),$scope.nbRepet=0|Number(window.localStorage.local_nbRepet)},initHauteur=function(){$scope.nbTailleHauteur=1|Number(window.localStorage.local_nbTailleHauteur),$scope.diffTailleHauteur=0|Number(window.localStorage.local_diffTailleHauteur)},"entiere"==$state.current.name?($scope.hauteur=!0,initDemiePorte(),initHauteur()):($scope.hauteur=!1,initDemiePorte()),$scope.$watch("nbRepet + nbTailleLargeur + nbTailleHauteur + diffTailleLargeur + diffTailleHauteur",function(){$scope.nbEssai=$scope.nbTailleLargeur*$scope.nbTailleHauteur*$scope.nbRepet,saveAllValues()}),$scope.executer_click=function(){$scope.informationsDonnees="",$scope.nbEssai>0&1==$scope.nbTailleLargeur?$scope.hauteur?testerH():sendMessage():$scope.nbEssai>0&$scope.nbTailleLargeur>1&0!=$scope.diffTailleLargeur?$scope.hauteur?testerH():sendMessage():$scope.informationsDonnees="Tous les champs ne sont pas remplis"},testerH=function(){1==$scope.nbTailleHauteur?sendMessage():$scope.nbTailleHauteur>1&0!=$scope.diffTailleHauteur?sendMessage():$scope.informationsDonnees="Tous les champs ne sont pas remplis"};var sendMessage=function(){var type="";type="entiere"==$state.current.name?"e":"demi_haut"==$state.current.name?"dh":"db";var message=type+"/"+$scope.nbRepet+"_"+$scope.nbTailleLargeur+"_"+$scope.diffTailleLargeur+"_"+$scope.nbTailleHauteur+"_"+$scope.diffTailleHauteur;$http.get(message),$state.go("runPortes")};saveAllValues=function(){window.localStorage.local_nbRepet=$scope.nbRepet,window.localStorage.local_nbTailleLargeur=$scope.nbTailleLargeur,window.localStorage.local_diffTailleLargeur=$scope.diffTailleLargeur,$scope.hauteur&&(window.localStorage.local_nbTailleHauteur=$scope.nbTailleHauteur,window.localStorage.local_diffTailleHauteur=$scope.diffTailleHauteur)},$scope.previous=function(){$state.go("portes")}}),menu.controller("PortesRunCtrl",function($scope,$state,$http,$rootScope,$document,$timeout){$rootScope.chemin="Accueil",$rootScope.chemin3="Application en cours",$rootScope.stateChemin3="runPortes",$rootScope.suivant=!1;var pool=function(){"runPortes"===$state.current.name&&($http.get("/porte").then(function(resp){$state.go("mainMenu")}),$timeout(pool,200))};$document.on("keydown",function(e){8===e.which&&e.preventDefault()}),pool(),$scope.end_click=function(){$http.get("stop"),$state.go("mainMenu")}});