var modules=["ui.router","ngStorage"],menu=angular.module("menu",modules);menu.controller("menuWebCtrl",function($scope,$state,$rootScope,$http){$state.go("mainMenu")}),menu.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("mainMenu",{url:"",templateUrl:"client/templates/mainMenu.html"}).state("oob",{url:"/sortie_de_corps",templateUrl:"client/templates/oob.html"}).state("runOob",{url:"/sortie_de_corps/application_en_cours",templateUrl:"client/templates/runOob.html"}).state("avatar",{url:"/avatar",templateUrl:"client/templates/avatar.html"}).state("avatar_choix",{url:"/avatar/choix",templateUrl:"client/templates/avatarMedecin.html"}).state("portes",{url:"/portes",templateUrl:"client/templates/portes.html"}).state("entiere",{url:"/portes/entiere",templateUrl:"client/templates/portesConfig.html"}).state("demi_haut",{url:"/portes/demi_haut",templateUrl:"client/templates/portesConfig.html"}).state("demi_bas",{url:"/portes/demi_bas",templateUrl:"client/templates/portesConfig.html"}).state("runPortes",{url:"/portes/en_cours",templateUrl:"client/templates/runPortes.html"}).state("humanoidesConfig",{url:"/humanoides",templateUrl:"client/templates/humanoides.html"}).state("runHumanoide",{url:"/humanoides/en_cours",templateUrl:"client/templates/runHumanoide.html"}).state("humanoides",{url:"/humanoides/humanoides",templateUrl:"client/templates/humanoidesConfig.html"}).state("batons",{url:"/humanoides/batons",templateUrl:"client/templates/humanoidesConfig.html"})}),menu.controller("mainMenuCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin1="",$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.chemin4="",$rootScope.suivant=!0,$scope.exit=function(){$http.get("/exit")},$rootScope.exit=function(state){$http.get("stop"),state?$state.go(state):$state.go("mainMenu")}}),menu.controller("AvatarCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin1="Avatar",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin3="",$rootScope.suivant=!0;var sexe="F";$scope.previous=function(){$state.go("mainMenu")},$scope.next=function(){$http.get("/"+sexe+"_avatar"),$state.go("avatar_choix")},$scope.sexe_selected=function(type){sexe=type}}),menu.controller("AvatarMedecinCtrl",function($scope,$state,$rootScope,$http){$rootScope.chemin="Accueil",$rootScope.chemin3="Choix Médecin",$rootScope.suivant=!1,$scope.previous=function(){$state.go("avatar"),$http.get("stop")},$scope.next=function(){$http.get("validerAvatar/"+$scope.facteurAvatar),$state.go("mainMenu")}}),menu.controller("HumanoideRunCtrl",function($scope,$state,$http,$rootScope,$document,$timeout){$rootScope.chemin="Accueil",$rootScope.chemin2="Application en cours",$rootScope.stateChemin2="runHumanoide",$rootScope.suivant=!1;var pool=function(){"runHumanoide"===$state.current.name&&($http.get("/humanoide").then(function(resp){$state.go("mainMenu")}),$timeout(pool,200))};$document.on("keydown",function(e){8===e.which&&e.preventDefault()}),pool(),$scope.end_click=function(){$http.get("stop"),$state.go("mainMenu")}}),menu.controller("HumanoideCtrl",function($scope,$state,$rootScope){$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des humanoïdes ",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.suivant_click=function(type){$state.go(type)},$scope.previous=function(){$state.go("mainMenu")}}),menu.controller("HumanoidesConfigCtrl",function($scope,$state,$http,$rootScope,$localStorage){console.log($state.current.name),$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des humanoïdes",$rootScope.stateChemin1="humanoides","humanoides"==$state.current.name?$rootScope.chemin2="Humanoides":$rootScope.chemin2="Batons",$rootScope.stateChemin2=$state.current.name,$rootScope.chemin3="",$rootScope.suivant=!0,$scope.previous=function(){$state.go("humanoidesConfig")},initHumanoide=function(){$scope.nbIntervalle=Number(window.localStorage.local_hum_nbIntervalle),$scope.nbRepet=Number(window.localStorage.local_hum_nbRepet),$scope.intervalleMin=Number(window.localStorage.local_hum_intervalleMin),$scope.intervalleMax=Number(window.localStorage.local_hum_intervalleMax)},initHumanoide();var sendMessage=function(){var type="hu",type2="";type2="humanoides"==$state.current.name?"hu":"ba";var message=type+"/"+$scope.nbRepet+"_"+$scope.nbIntervalle+"_"+$scope.intervalleMin+"_"+$scope.intervalleMax+"_"+type2;$http.get(message),$state.go("runHumanoide")};saveAllValues=function(){window.localStorage.local_hum_nbRepet=$scope.nbRepet,window.localStorage.local_hum_nbIntervalle=$scope.nbIntervalle,window.localStorage.local_hum_intervalleMin=$scope.intervalleMin,window.localStorage.local_hum_intervalleMax=$scope.intervalleMax},$scope.$watch("nbRepet + nbIntervalle + intervalleMin + intervalleMax",function(){$scope.nbEssai=$scope.nbIntervalle*$scope.nbRepet,saveAllValues()}),$scope.executer_click=function(){$scope.informationsDonnees="",$scope.nbEssai>0&1==$scope.nbIntervalle?sendMessage():$scope.nbEssai>0&$scope.nbIntervalle>1&$scope.intervalleMax>=1&$scope.intervalleMin>=1?sendMessage():$scope.informationsDonnees="Tous les champs ne sont pas remplis"},$scope.intervalleMinChanged=function(){$scope.intervalleMin>$scope.intervalleMax&&($scope.intervalleMax=$scope.intervalleMin)},$scope.intervalleMaxChanged=function(){$scope.intervalleMax<$scope.intervalleMin&&($scope.intervalleMin=$scope.intervalleMax)}}),menu.controller("OobCtrl",function($scope,$state,$http,$rootScope){$rootScope.chemin="Accueil",$rootScope.chemin1="Sortie de corps",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.morphing=!1,$scope.baton=!1,$scope.message="",$scope.previous=function(){$state.go("mainMenu")},$scope.next=function(){$scope.baton&&$scope.morphing&&$scope.ghost?$http.get("oob/1_1_1"):$scope.baton&&$scope.morphing?$http.get("oob/1_1_0"):$scope.morphing&&$scope.ghost?$http.get("oob/0_1_1"):$scope.morphing?$http.get("oob/0_1_0"):$scope.baton?$http.get("oob/1_0_0"):$http.get("oob/0_0_0"),$state.go("runOob")}}),menu.controller("OobRunCtrl",function($scope,$state,$http,$rootScope,$document){$rootScope.chemin="Accueil",$rootScope.chemin1="Sortie de corps",$rootScope.stateChemin1="oob",$rootScope.chemin2="",$rootScope.chemin3="Application en cours",$rootScope.stateChemin3=$state.current.name,$rootScope.suivant=!1,$document.on("keydown",function(e){8===e.which&&e.preventDefault()}),$scope.exit=function(){$http.get("stop"),$state.go("mainMenu")}}),menu.controller("PortesCtrl",function($scope,$state,$rootScope){$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des portes",$rootScope.stateChemin1=$state.current.name,$rootScope.chemin2="",$rootScope.chemin3="",$rootScope.suivant=!0,$scope.suivant_click=function(type){$state.go(type)},$scope.previous=function(){$state.go("mainMenu")}}),menu.controller("PortesConfigCtrl",function($scope,$state,$http,$rootScope,$localStorage){$rootScope.chemin="Accueil",$rootScope.chemin1="Exercice des portes",$rootScope.stateChemin1="portes","entiere"==$state.current.name?$rootScope.chemin2="Portes entières":"demi_haut"==$state.current.name?$rootScope.chemin2="Étagères":$rootScope.chemin2="Portiques",$rootScope.stateChemin2=$state.current.name,$rootScope.chemin3="",$rootScope.suivant=!0,initDemiePorte=function(){$scope.nbTailleLargeur=Number(window.localStorage.local_nbTailleLargeur),$scope.nbTailleHauteur=Number(1),$scope.largeurMin=Number(window.localStorage.local_largeurMin),$scope.largeurMax=Number(window.localStorage.local_largeurMax),$scope.hauteurMin=Number(window.localStorage.local_hauteurMin),$scope.hauteurMax=Number(window.localStorage.local_hauteurMax),$scope.nbRepet=0|Number(window.localStorage.local_nbRepet)},initHauteur=function(){$scope.nbTailleHauteur=Number(window.localStorage.local_nbTailleHauteur),$scope.hauteurMin=0|Number(window.localStorage.local_hauteurMin),$scope.hauteurMax=0|Number(window.localStorage.local_hauteurMax)},"entiere"==$state.current.name?($scope.hauteur=!0,initDemiePorte(),initHauteur()):($scope.hauteur=!1,initDemiePorte()),$scope.$watch("nbRepet + nbTailleLargeur + nbTailleHauteur + largeurMin + largeurMax + hauteurMin + hauteurMax",function(){$scope.nbEssai=$scope.nbTailleLargeur*$scope.nbTailleHauteur*$scope.nbRepet,saveAllValues()}),$scope.executer_click=function(){$scope.informationsDonnees="",$scope.nbEssai>0&1==$scope.nbTailleLargeur?$scope.hauteur?testerH():sendMessage():$scope.nbEssai>0&$scope.nbTailleLargeur>1&$scope.largeurMin>=1&$scope.largeurMax>=1?$scope.hauteur?testerH():sendMessage():$scope.informationsDonnees="Tous les champs ne sont pas remplis"},testerH=function(){1==$scope.nbTailleHauteur?sendMessage():$scope.nbTailleHauteur>1&$scope.hauteurMin>=1&$scope.hauteurMax>=1?sendMessage():$scope.informationsDonnees="Tous les champs ne sont pas remplis"};var sendMessage=function(){var type="";type="entiere"==$state.current.name?"e":"demi_haut"==$state.current.name?"dh":"db";var message=type+"/"+$scope.nbRepet+"_"+$scope.nbTailleLargeur+"_"+$scope.largeurMin+"_"+$scope.largeurMax+"_"+$scope.nbTailleHauteur+"_"+$scope.hauteurMin+"_"+$scope.hauteurMax;$http.get(message),$state.go("runPortes")};saveAllValues=function(){window.localStorage.local_nbRepet=$scope.nbRepet,window.localStorage.local_nbTailleLargeur=$scope.nbTailleLargeur,window.localStorage.local_largeurMin=$scope.largeurMin,window.localStorage.local_largeurMax=$scope.largeurMax,$scope.hauteur&&(window.localStorage.local_nbTailleHauteur=$scope.nbTailleHauteur,window.localStorage.local_hauteurMin=$scope.hauteurMin,window.localStorage.local_hauteurMax=$scope.hauteurMax)},$scope.previous=function(){$state.go("portes")},$scope.largeurMinChanged=function(){$scope.largeurMin>$scope.largeurMax&&($scope.largeurMax=$scope.largeurMin)},$scope.largeurMaxChanged=function(){$scope.largeurMax<$scope.largeurMin&&($scope.largeurMin=$scope.largeurMax)},$scope.hauteurMaxChanged=function(){$scope.hauteurMax<$scope.hauteurMin&&($scope.hauteurMin=$scope.hauteurMax)},$scope.hauteurMinChanged=function(){$scope.hauteurMin>$scope.hauteurMax&&($scope.hauteurMax=$scope.hauteurMin)}}),menu.controller("PortesRunCtrl",function($scope,$state,$http,$rootScope,$document,$timeout){$rootScope.chemin="Accueil",$rootScope.chemin3="Application en cours",$rootScope.stateChemin3="runPortes",$rootScope.suivant=!1;var pool=function(){"runPortes"===$state.current.name&&($http.get("/porte").then(function(resp){$state.go("mainMenu")}),$timeout(pool,200))};$document.on("keydown",function(e){8===e.which&&e.preventDefault()}),pool(),$scope.end_click=function(){$http.get("stop"),$state.go("mainMenu")}});